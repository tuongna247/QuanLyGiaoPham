@using HTTLVN.QLTLH.Models
@model HTTLVN.QLTLH.Models.User

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var roleMappings =( List<RoleMapping>)ViewBag.RoleMappings ;
}

<h4>Chỉnh sửa</h4>
<form method="post" class="form-horizontal form-box" enctype="multipart/form-data"  >
    @Html.ValidationSummary(true)
    @Html.HiddenFor(model => model.id)
    <div class="form-group">
        <label class="control-label col-md-2">  @Html.LabelFor(model => model.username,"Tài khoản")
        </label>
        <div class="col-md-2">
            @Html.EditorFor(model => model.username)
            @Html.ValidationMessageFor(model => model.username)
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-md-2">  @Html.LabelFor(model => model.RoleDetails, "Quyền hạn")
        </label>
        <div class="col-md-10">
            <table cellpadding="4pxs" cellspacing="4" >
                <tr>
            @foreach (var role in roleMappings)
            {
                bool iscontain = Model.RoleDetails.FirstOrDefault(a=>a.RoleMapping1==role) != null;
                <td style="padding: 2px"> <input name="roleMapping" value="@role.id" @if (iscontain)
                                                                                    {
<text>checked="checked"</text>
                                                                                    } type="checkbox" />@role.Name</td>
            }           
                </tr>
            </table>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-md-2">  @Html.LabelFor(model => model.password,"Mật khẩu")
        </label>
        <div class="col-md-2">
            @Html.PasswordFor(model => model.password, new { @placeholder = "<đã mã hóa>" })
            @Html.ValidationMessageFor(model => model.password)
        </div>
    </div>
      <div class="form-group">
        <label class="control-label col-md-2"></label>
        <div class="col-md-10">
            <input type="submit" value="Lưu"  name="btnSave" class="btn btn-primary"/>  
             @Html.ActionLink("Quay trở lại", "Index", null, null, new { @class = "btn btn-primary" })
        </div>
    </div>
</form>

<div>
   
</div>
